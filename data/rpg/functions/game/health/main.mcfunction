execute as @e[type=!armor_stand, type=!item, type=!end_crystal, type=!player, type=!painting, type=!villager, type=!item_frame, type=!arrow, type=!area_effect_cloud, type=!boat, type=!chest_minecart, type=!command_block_minecart, type=!dragon_fireball, type=!egg, type=!ender_pearl, type=!evoker_fangs, type=!experience_bottle, type=!experience_orb, type=!eye_of_ender, type=!falling_block, type=!fireball, type=!firework_rocket, type=!furnace_minecart, type=!hopper_minecart, type=!leash_knot, type=!lightning_bolt, type=!llama_spit, type=!minecart, type=!potion, type=!shulker_bullet, type=!small_fireball, type=!snowball, type=!spawner_minecart, type=!spectral_arrow, type=!tnt, type=!tnt_minecart, type=!trident, type=!wither_skull, tag=appliedHealth, nbt={HurtTime:8s}] run function rpg:game/health/update
execute as @e[type=!armor_stand, type=!item, type=!end_crystal, type=!player, type=!painting, type=!villager, type=!item_frame, type=!arrow, type=!area_effect_cloud, type=!boat, type=!chest_minecart, type=!command_block_minecart, type=!dragon_fireball, type=!egg, type=!ender_pearl, type=!evoker_fangs, type=!experience_bottle, type=!experience_orb, type=!eye_of_ender, type=!falling_block, type=!fireball, type=!firework_rocket, type=!furnace_minecart, type=!hopper_minecart, type=!leash_knot, type=!lightning_bolt, type=!llama_spit, type=!minecart, type=!potion, type=!shulker_bullet, type=!small_fireball, type=!snowball, type=!spawner_minecart, type=!spectral_arrow, type=!tnt, type=!tnt_minecart, type=!trident, type=!wither_skull, tag=!appliedHealth] at @s if entity @a[distance=..30] run function rpg:game/health/apply